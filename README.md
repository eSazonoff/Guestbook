# Guestbook

PHP-скрипт с именем index.php, который реализует функциональность гостевой книги:
1. способен добавлять новые сообщений в гостевую книгу;
2. имеет список сообщений в гостевой книге.

Для отображения всех сообщений из гостевой книги, от папки messages принимается список файлов (папка messages находиться в том же месте, что и файл скрипта).
Если папка еще не существует, она создается автоматически (используется функция [mkdir()](https://www.php.net/manual/en/function.mkdir.php "PHP: mkdir - Manual")). Далее считываются сообщения из файлов.

Ниже списка сообщений отображается HTML-форма для добавления новых сообщений. При отправке формы проверяются и обработываются полученные данные (https://www.php.net/manual/en/tutorial.forms.php). Если данные введены правильно, создается новый файл с именем $time.txt (где $time - текущая дата и время, получаемое с помощью функции [date()](https://www.php.net/manual/en/function.date.php "PHP: date - Manual")), записывается новое сообщение и затем отображается список сообщений (включая новое). В противном случае будет отображено сообщение об ошибке:
Error while adding your message.

**Примечание:**

* Сообщения гостевой книги храниться в виде текстовых файлов в папке messages (1 файл для 1 сообщения).

* Чтобы проверить, существует ли папка, используется функция [is_dir()](https://www.php.net/manual/en/is-dir.file.php "PHP: is_dir - Manual").

* На странице, которую создает скрипт, находится форма для добавления нового сообщения гостевой книги. Форма содержит два ввода: первый для имени автора (name = "author"), второй для электронного адреса (name = "email"). Для поля сообщения и спользуется <textarea></textarea>.

* Все поля обязательны для заполнения. Электронная почта проходит дополнительную проверку с помощью функции [filter_var()](https://www.php.net/manual/en/function.filter-var.php "PHP: filter_var - Manual") с фильтром FILTER_VALIDATE_EMAIL.

* Для чтения файлов используется функция [file()](https://www.php.net/manual/en/function.file.php "PHP: file - Manual").

* Для записи файлов используется последовательный успешных вызов функций fopen(), fwrite() и fclose().

* При отображении сообщений из гостевой книги все текстовые данные перед выводом обрабатываются функцией [htmlspecialchars()](https://www.php.net/manual/en/function.htmlspecialchars.php "PHP: htmlspecialchars - Manual"). Эта функция преобразует специальные символы HTML в их эквиваленты HTML (например, < будет преобразованно в &_lt;).
Что не позволяет злоумышленникам выполнить произвольный HTML-код в приложении.

* Адрес электронной почты отображается в виде ссылки (адрес ссылки имеет формат: mailto:$email, где $email - это адрес электронной почты автора сообщения).

* Используются полные php теги (<?php, а не <?).

**Формат хранения сообщений:**

1. 1-я строка файла - имя автора сообщения

2. 2-я строка - email автора сообщения

3. 3-я и последующие строки - текст сообщения (может быть многострочным multi-line).
